## 状态变化触发刷新

看下面的代码：

```kotlin
var num by mutableStateOf(1)  
setContent {  
    Text(text = "当前的值是 $num", Modifier.clickable { num++ })  
}
```

我们在点击了 Text 内容之后，会更新 num 的数值，会立即刷新到界面当中，如下：

![[device-2023-04-16-163307.mp4]] 

## List 不会自动刷新 UI

那如果我们将一个整型数换成一个 List 呢？会如何呢？

```kotlin
var nums by mutableStateOf(mutableListOf(1, 2, 3))  
setContent {  
    Column {  
        Button(onClick = {  
            nums.add(nums.last() + 1)  
        }) {  
            Text(text = "加一")  
        }  
        nums.forEachIndexed { index, num ->  
            Text(text = "第 $index 个文字是 $num")  
        }  
    }
}
```

我们仅仅将 `mutableStateOf()` 中的值换成 `mutableListOf`，在点击 button 时，会向  List 中添加一个元素。

上面的代码是不 work 的，在 [[状态订阅与自动更新]] 中我们分析过，Compose 能自动更新的逻辑，是在 MutableState 的 `get` 和 `set` 方法中的，而我们通过 `nums.add()` 添加一个元素，并没有触发 `nums` 的 `set` 方法。

